const h=e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("favoritesAnimes")),n=t.findIndex(s=>e.currentTarget.parentElement.id===s.mal_id.toString());t.splice(n,1),localStorage.setItem("favoritesAnimes",JSON.stringify(t)),a.innerHTML="",p(t,a)},A=document.querySelector(".js-searchButton"),f=document.querySelector(".js-inputSearch");let d=[];const S=e=>{e.preventDefault(),m.innerHTML="";const t=f.value.toLowerCase();fetch(`https://api.jikan.moe/v4/anime?q=${t}`).then(n=>n.json()).then(n=>{d=n.data,F(d,m)})};A.addEventListener("click",S);const m=document.querySelector(".js-listResults"),L=e=>{const t=document.createElement("img");return e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?t.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"):t.setAttribute("src",e.images.jpg.image_url),t.setAttribute("alt","Portada anime"),t},T=e=>{const t=document.createElement("h2"),n=document.createTextNode(e.title);return t.appendChild(n),t},F=(e,t)=>{for(const s of e){const o=document.createElement("li");o.setAttribute("class","js-itemLi"),o.setAttribute("id",s.mal_id);const i=T(s);o.appendChild(i);const l=L(s);o.appendChild(l),t.appendChild(o)}const n=document.querySelectorAll(".js-itemLi");for(const s of n)s.addEventListener("click",C)},a=document.querySelector(".js-listFavorites"),u=document.querySelector(".js-sectionFavorites");let r=[];const C=e=>{u.classList.remove("hidden");const t=JSON.parse(localStorage.getItem("favoritesAnimes"));t!==null&&(r=t),a.innerHTML="",e.currentTarget.classList.add("favoriteAnime");const s=d.find(i=>e.currentTarget.id===i.mal_id.toString());r.findIndex(i=>i.mal_id.toString()===e.currentTarget.id)===-1&&r.push(s),p(r,a),localStorage.setItem("favoritesAnimes",JSON.stringify(r))},j=e=>{const t=document.createElement("img");return e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?t.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"):t.setAttribute("src",e.images.jpg.image_url),t.setAttribute("alt","Portada anime"),t},x=e=>{const t=document.createElement("h2"),n=document.createTextNode(e.title);return t.appendChild(n),t},p=(e,t)=>{for(const n of e){const s=j(n),o=x(n),i=document.createElement("button");i.setAttribute("class","js-closeButton");const l=document.createTextNode("X");i.appendChild(l);const c=document.createElement("li");c.setAttribute("class","itemLi"),c.setAttribute("id",n.mal_id),c.appendChild(s),c.appendChild(o),c.appendChild(i),t.appendChild(c);const g=document.querySelectorAll(".js-closeButton");for(const v of g)v.addEventListener("click",h)}},E=()=>{const e=JSON.parse(localStorage.getItem("favoritesAnimes"));e!==null&&(p(e,a),u.classList.remove("hidden"))};E();const I=document.querySelector(".js-resetButton"),b=document.querySelector(".js-resetFavoritesButton"),y=e=>{e.preventDefault(),m.innerHTML="",a.innerHTML="",localStorage.removeItem("favoritesAnimes"),f.value=null,r=[],u.classList.add("hidden")};I.addEventListener("click",y);const B=e=>{e.preventDefault,a.innerHTML="",localStorage.removeItem("favoritesAnimes"),r=[]};b.addEventListener("click",B);
//# sourceMappingURL=main.js.map
